# Lancers Scraper プロジェクトのTODOリスト

## スクレイピング問題の解決
- **ログイン処理の実装**
  - [ ] `login_if_needed`メソッドを`search_short_videos`や`get_work_detail_by_url`内で呼び出すように修正
  - [ ] 環境変数を使用してユーザー名とパスワードを安全に管理する仕組みを追加
- **HTML構造の違いへの対応**
  - [ ] 会員ページと非会員ページで異なるHTMLセレクタを試すロジックを追加
  - [ ] ページタイプ判定ロジックを強化し、動的にセレクタを切り替える

## 生成AI APIを活用したデータ抽出
- **技術選定**
  - [ ] Google Gemini APIを優先して利用：スクリーンショットから文字情報を抽出するOCR機能に使用
  - [ ] Firecrawl MCP Server：スクレイピングとデータ抽出を補助するツールとして利用
- **要件定義**
  - **スクリーンショット取得**
    - [ ] Playwrightを使用してページのスクリーンショットを撮影
    - [ ] スクロールやクリックなどのアクションを実行して必要な情報を表示させた状態で撮影
  - **OCR処理**
    - [ ] 撮影したスクリーンショットをGemini APIに送信し、テキスト情報を抽出
    - [ ] 抽出したテキストを構造化データとして保存
  - **エラー処理とフォールバック**
    - [ ] API呼び出し失敗時のリトライロジックを追加
    - [ ] 生成AIによる抽出が失敗した場合、従来のHTMLパース手法にフォールバック

## 実装計画
- [ ] 既存コードの修正（ログイン処理とセレクタの動的切り替え）
- [ ] Gemini APIの統合（認証設定、API呼び出しの実装）
- [ ] スクリーンショット取得とOCR処理の追加
- [ ] テストとデバッグ（会員ページでのデータ抽出確認、生成AIの精度検証）
